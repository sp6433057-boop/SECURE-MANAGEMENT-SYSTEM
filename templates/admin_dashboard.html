<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="dashboard-container">

    <h2>Admin Dashboard</h2>

    <!-- SEARCH BAR -->
<form method="GET"
      action="{{ url_for('admin_dashboard') }}"
      style="margin: 15px 0; text-align:left;">

    <input type="text"
           name="search"
           placeholder="Search by name, roll, reg no, email, branch"
           value="{{ search if search else '' }}"
           style="padding:8px; width:260px;">

    <button type="submit" class="btn small-btn">Search</button>

    {% if search %}
        <a href="{{ url_for('admin_dashboard') }}"
           class="btn small-btn logout-btn">Clear</a>
    {% endif %}
</form>


    <!-- TOP ACTIONS -->
    <div class="admin-actions">
        <a href="{{ url_for('add_student') }}" class="btn small-btn">âž• Add Student</a>
        <a href="{{ url_for('upload_excel') }}" class="btn small-btn">ðŸ“„ Upload Excel</a>
        <a href="{{ url_for('admin_profile') }}" class="btn small-btn">ðŸ‘¤ My Profile</a>
        <a href="{{ url_for('logout') }}" class="btn small-btn logout-btn">ðŸšª Logout</a>
    </div>

    <!-- STUDENT TABLE -->
    <div class="table-container">
        <table class="student-table">

            <thead>
                <tr>
                    <th style="width:90px;">Photo</th>
                    <th>Name</th>
                    <th>Father Name</th>
                    <th>Roll No</th>
                    <th>Reg No</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Course</th>
                    <th>Branch</th>
                    <th>Semester</th>
                    <th>Session</th>
                    <th style="width:130px;">Actions</th>
                </tr>
            </thead>

            <tbody>
                {% for student in students %}
                <tr>

                    <!-- PHOTO -->
                    <td>
                        {% if student.photo %}
                        <img src="{{ url_for('static', filename='uploads/' ~ student.photo) }}"
                             alt="Student Photo"
                             style="
                                width:60px;
                                height:80px;
                                object-fit:cover;
                                border-radius:4px;
                                border:2px solid #4CAF50;
                                display:block;
                                margin:auto;">
                        {% else %}
                        N/A
                        {% endif %}
                    </td>

                    <td>{{ student.name }}</td>
                    <td>{{ student.father_name }}</td>
                    <td>{{ student.roll_number }}</td>
                    <td>{{ student.registration_number }}</td>
                    <td>{{ student.email }}</td>
                    <td>{{ student.mobile }}</td>
                    <td>{{ student.course }}</td>
                    <td>{{ student.branch }}</td>
                    <td>{{ student.semester }}</td>
                    <td>{{ student.session }}</td>

                    <!-- ACTIONS (NOW ALWAYS VISIBLE) -->
                    <td style="white-space:nowrap; text-align:center;">
    <a href="{{ url_for('edit_student', student_id=student.id) }}"
       class="btn small-btn"
       style="margin-bottom:6px; display:inline-block;">
       Edit
    </a>

    <form action="{{ url_for('delete_student', student_id=student.id) }}"
          method="POST"
          style="margin-top:6px;">
        <button type="submit"
                class="btn small-btn danger-btn"
                onclick="return confirm('Delete this student?')">
            Delete
        </button>
    </form>
</td>


                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>

</div>

</body>
</html>



